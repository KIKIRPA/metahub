# metadatablocks_api

Metadata collector application written in Python/FastAPI

## Installing the requirements

To install the requirements for this API, you need to execute the following
commands, at the root of this repository:

```shell
python -m venv venv   # Creating a virtual environment for our application
source venv/bin/activate  # Activating the virtual environment
pip install -r requirements.txt  # Installing requirements
```

## Starting the API

### MongoDB

Before starting the API, verify that the MongoDB container is started by running the `docker-compose ps` command in the `mongo_container` directory. You should see something like:

```text
             Name                            Command               State            Ports          
---------------------------------------------------------------------------------------------------
mongo_container_mongo-express_1   tini -- /docker-entrypoint ...   Up      0.0.0.0:8081->8081/tcp  
mongo_container_mongo_mbapi_1     docker-entrypoint.sh mongod      Up      0.0.0.0:27017->27017/tcp
```

If the MongoDB containers are not "up", one can do this with `docker-compose up`

### FastAPI

```shell
source venv/bin/activate  # Activating the virtual environment
cd src
uvicorn main:app --reload
```

and visit the following URL: <http://127.0.0.1:8000>.
You can also visit either <http://127.0.0.1:8000/docs> or <http://127.0.0.1:8000/redoc> to consult the documentation of the API generated by FastAPI.
